<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Main Service</title>
  <!-- Bootstrap 5 CSS (CDN) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
</head>
<body>
<div class="container mt-5">

  <!-- Header / Account Links -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Main Service</h2>
    <div>
      <a href="/account" class="btn btn-outline-info">Manage Account</a>
      <a href="/logout" class="btn btn-outline-danger ms-2">Logout</a>
    </div>
  </div>
  <hr>

  <!-- Service Selection -->
  <div class="mb-3">
    <label for="serviceSelector" class="form-label">Choose a Service:</label>
    <select id="serviceSelector" class="form-select">
      <option value="crunchit">CrunchIt</option>
      <option value="civitai">Civitai</option>
      <option value="huggingface">HuggingFace</option>
    </select>
  </div>

  <!-- Tabs -->
  <ul class="nav nav-tabs" id="mainTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button
        class="nav-link active"
        id="txt2img-tab"
        data-bs-toggle="tab"
        data-bs-target="#txt2img"
        type="button"
        role="tab"
        aria-controls="txt2img"
        aria-selected="true"
      >
        txt2img
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button
        class="nav-link"
        id="img2img-tab"
        data-bs-toggle="tab"
        data-bs-target="#img2img"
        type="button"
        role="tab"
        aria-controls="img2img"
        aria-selected="false"
      >
        img2img
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button
        class="nav-link"
        id="chat-tab"
        data-bs-toggle="tab"
        data-bs-target="#chat"
        type="button"
        role="tab"
        aria-controls="chat"
        aria-selected="false"
      >
        Chat
      </button>
    </li>
  </ul>

  <!-- Tab Contents -->
  <div class="tab-content p-3 border" id="mainTabsContent">
    
    <!-- txt2img Tab -->
    <div
      class="tab-pane fade show active"
      id="txt2img"
      role="tabpanel"
      aria-labelledby="txt2img-tab"
    >
      <form id="txt2imgForm">
        <div class="mb-3">
          <label for="txt2imgPrompt" class="form-label">Prompt</label>
          <textarea class="form-control" id="txt2imgPrompt" rows="3"></textarea>
        </div>
        <div class="mb-3">
          <label for="txt2imgWidth" class="form-label">Width</label>
          <input
            type="number"
            class="form-control"
            id="txt2imgWidth"
            value="512"
          >
        </div>
        <div class="mb-3">
          <label for="txt2imgHeight" class="form-label">Height</label>
          <input
            type="number"
            class="form-control"
            id="txt2imgHeight"
            value="512"
          >
        </div>
        <button type="submit" class="btn btn-primary">Generate</button>
      </form>
      <div id="txt2imgResult" class="mt-3"></div>
    </div>

    <!-- img2img Tab -->
    <div
      class="tab-pane fade"
      id="img2img"
      role="tabpanel"
      aria-labelledby="img2img-tab"
    >
      <form id="img2imgForm">
        <div class="mb-3">
          <label for="img2imgFile" class="form-label">Upload Base Image</label>
          <input
            type="file"
            class="form-control"
            id="img2imgFile"
          >
        </div>
        <div class="mb-3">
          <label for="img2imgPrompt" class="form-label">Prompt</label>
          <textarea class="form-control" id="img2imgPrompt" rows="3"></textarea>
        </div>
        <div class="mb-3">
          <label for="img2imgWidth" class="form-label">Width</label>
          <input
            type="number"
            class="form-control"
            id="img2imgWidth"
            value="512"
          >
        </div>
        <div class="mb-3">
          <label for="img2imgHeight" class="form-label">Height</label>
          <input
            type="number"
            class="form-control"
            id="img2imgHeight"
            value="512"
          >
        </div>
        <button type="submit" class="btn btn-primary">Generate</button>
      </form>
      <div id="img2imgResult" class="mt-3"></div>
    </div>

    <!-- Chat Tab -->
    <div
      class="tab-pane fade"
      id="chat"
      role="tabpanel"
      aria-labelledby="chat-tab"
    >
      <form id="chatForm">
        <div class="mb-3">
          <label for="chatInput" class="form-label">Message</label>
          <textarea class="form-control" id="chatInput" rows="3"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Send</button>
      </form>
      <div
        id="chatResult"
        class="mt-3 border p-2"
        style="height: 200px; overflow-y: auto;"
      ></div>
    </div>

  </div> <!-- End of tab-content -->

</div> <!-- End of container -->

<!-- Bootstrap 5 JS (CDN) -->
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
></script>

<script>
// Example client-side form handling.
// In real usage, you'd replace these with AJAX/fetch calls to your backend.

document.getElementById("txt2imgForm").addEventListener("submit", function(e) {
  e.preventDefault();
  let service = document.getElementById("serviceSelector").value;
  let prompt = document.getElementById("txt2imgPrompt").value;
  let width = document.getElementById("txt2imgWidth").value;
  let height = document.getElementById("txt2imgHeight").value;
  // For demonstration:
  document.getElementById("txt2imgResult").textContent =
    `Generating txt2img via ${service}, prompt: "${prompt}" (${width}x${height})`;
});

document.getElementById("img2imgForm").addEventListener("submit", function(e) {
  e.preventDefault();
  let service = document.getElementById("serviceSelector").value;
  let fileInput = document.getElementById("img2imgFile");
  let file = fileInput.files[0];
  let prompt = document.getElementById("img2imgPrompt").value;
  let width = document.getElementById("img2imgWidth").value;
  let height = document.getElementById("img2imgHeight").value;
  // For demonstration:
  document.getElementById("img2imgResult").textContent =
    `Generating img2img via ${service}, file: "${file ? file.name : 'None'}", prompt: "${prompt}" (${width}x${height})`;
});

document.getElementById("chatForm").addEventListener("submit", function(e) {
  e.preventDefault();
  let service = document.getElementById("serviceSelector").value;
  let message = document.getElementById("chatInput").value;
  let chatBox = document.getElementById("chatResult");

  // Append a new message for demonstration
  let newMessage = document.createElement("div");
  newMessage.textContent = `You (${service}): ${message}`;
  chatBox.appendChild(newMessage);

  // In real usage, you'd POST the message to your server for processing
  // and append the AI response, etc.
});
</script>
</body>
</html>
